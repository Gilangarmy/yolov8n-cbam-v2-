# YOLOv8n-CBAM
# Menggunakan C2f yang sudah dimodifikasi agar Bottleneck â†’ BottleneckCBAM

# Parameter Backbone & Head
nc: 80  # jumlah class
scales:
  n: [0.33, 0.25, 1024]  # sama seperti YOLOv8n

backbone:
  # [from, repeats, module, args]
  - [ -1, 1, Conv, [64, 3, 2] ]      # 0
  - [ -1, 1, Conv, [128, 3, 2] ]     # 1
  - [ -1, 3, C2f, [128, True] ]      # 2 (INI SUDAH MENGGUNAKAN BottleneckCBAM)
  - [ -1, 1, Conv, [256, 3, 2] ]     # 3
  - [ -1, 6, C2f, [256, True] ]      # 4 (CBAM DI SINI)
  - [ -1, 1, Conv, [512, 3, 2] ]     # 5
  - [ -1, 6, C2f, [512, True] ]      # 6 (CBAM DI SINI)
  - [ -1, 1, Conv, [1024, 3, 2] ]    # 7
  - [ -1, 3, C2f, [1024, True] ]     # 8 (BOTTLENECK-CBAM DI TITIK TERAKHIR BACKBONE)
  - [ -1, 1, SPPF, [1024, 5] ]       # 9

head:
  - [ -1, 1, Conv, [512, 1, 1] ]     # 10
  - [ -1, 1, nn.Upsample, [None, 2, 'nearest'] ]   # 11
  - [ [ -1, 6 ], 1, Concat, [1] ]    # 12
  - [ -1, 3, C2f, [512] ]            # 13 (CBAM SISIPAN DI HEAD)

  - [ -1, 1, Conv, [256, 1, 1] ]     # 14
  - [ -1, 1, nn.Upsample, [None, 2, 'nearest'] ]   # 15
  - [ [ -1, 4 ], 1, Concat, [1] ]    # 16
  - [ -1, 3, C2f, [256] ]            # 17

  - [ -1, 1, Conv, [256, 3, 2] ]     # 18
  - [ [ -1, 14 ], 1, Concat, [1] ]   # 19
  - [ -1, 3, C2f, [512] ]            # 20

  - [ -1, 1, Conv, [512, 3, 2] ]     # 21
  - [ [ -1, 10 ], 1, Concat, [1] ]   # 22
  - [ -1, 3, C2f, [1024] ]           # 23

  - [ [ 17, 20, 23 ], 1, Detect, [ nc ] ]   # Detect layer
